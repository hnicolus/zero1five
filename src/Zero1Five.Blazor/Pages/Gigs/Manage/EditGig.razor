@page "/manage/gigs/{id:guid}"
@inherits Zero1FiveComponentBase
@using System.ComponentModel.DataAnnotations
<MudContainer >
    <MudGrid Justify="Justify.Center">
        <MudItem sm="12" md="12" lg="10">
            <EditForm Model="@model" OnValidSubmit="OnValidSubmit">
                <DataAnnotationsValidator/>
                <MudCard>
                    <MudCardContent>
                        <MudTextField Label="Title" HelperText="gig Title "
                                      @bind-Value="model.Title" For="@(() => model.Title)"/>
                        <InputFile id="fileInput" OnChange="@OnInputFileChange" hidden/>
                        @if (!string.IsNullOrEmpty(PreviewImage))
                        {
                            <img src="@PreviewImage" width="100" height="100" alt="@PreviewImage"/>
                        }
                        <MudFab HtmlTag="label"
                                Color="Color.Secondary"
                                Icon="@Icons.Filled.Image"
                                Label="Load picture"
                                for="fileInput" On/>
                        <MudTextField T="string"
                                      @bind-Value="model.Description"
                                      Label="Description" Variant="Variant.Outlined"
                                      Class="mt-3"
                                      For="@(() => model.Description)"
                                      Lines="8"/>
                    </MudCardContent>
                    <MudCardActions>
                        <MudButton
                            ButtonType="ButtonType.Submit"
                            Variant="Variant.Filled"
                            Color="Color.Primary"
                            Class="ml-auto">
                            Save
                        </MudButton>
                    </MudCardActions>
                </MudCard>
                <MudText Typo="Typo.body2" Align="Align.Center" Class="my-4">
                    Fill out the form correctly to Save.
                </MudText>
                <MudExpansionPanels>
                    <MudExpansionPanel Text="Show Validation Summary">
                        @if (valid)
                        {
                            <MudText Color="Color.Success">Saved</MudText>
                        }
                        else
                        {
                            <MudText Color="@Color.Error">
                                <ValidationSummary/>
                            </MudText>
                        }
                    </MudExpansionPanel>
                </MudExpansionPanels>
            </EditForm>
        </MudItem>
    </MudGrid>
</MudContainer>